(this["webpackJsonptodo-list-redux"]=this["webpackJsonptodo-list-redux"]||[]).push([[0],{24:function(e,t,a){e.exports={"collection-item":"src_collection-item__3iKRV",icons:"src_icons__12r9A",completed:"src_completed__1pKJi"}},44:function(e){e.exports=JSON.parse('{"nav_bar":{"title":"TO-DO APP","btn_logIn":"LogIn","btn_logOut":"LogOut"},"form":{"btn":"Add","label":"Todo","placeholder":"Add your to-do (min 5 symbols)","alert":"Todo must have at least five symbols"},"list":{"clear_list":"Your list clear"},"auth":{"title":"Auth","name_login":"Login","name_password":"Password","btn":"Authorize","alert":"Input should not be empty"}}')},45:function(e){e.exports=JSON.parse('{"nav_bar":{"title":"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u043b","btn_logIn":"\u0412\u0445\u043e\u0434","btn_logOut":"\u0412\u044b\u0445\u043e\u0434"},"form":{"btn":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c","label":"\u0417\u0430\u043c\u0435\u0442\u043a\u0430","placeholder":"\u0414\u043e\u0431\u0430\u0432\u0442\u0435 \u0432\u0430\u0448\u0443 \u0437\u0430\u043c\u0435\u0442\u043a\u0443 (\u043c\u0438\u043d\u0438\u043c\u0443\u043c 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)","alert":"\u0417\u0430\u043c\u0435\u0442\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0438\u043c\u0435\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c: 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"},"list":{"clear_list":"\u0412\u0430\u0448 \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0443\u0441\u0442"},"auth":{"title":"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f","name_login":"\u041b\u043e\u0433\u0438\u043d","name_password":"\u041f\u0430\u0440\u043e\u043b\u044c","btn":"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f","alert":"\u041f\u043e\u043b\u044f \u0432\u0432\u043e\u0434\u0430 \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c\u0438"}}')},48:function(e,t,a){e.exports=a(64)},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l,i,u,s=a(9),m=a(8),d=a(11),b=a(35),f=a(66),p=a(68),O=Object(p.a)("ADD_TODO"),v=Object(p.a)("ADD_ALL_TODO"),h=Object(p.a)("TOGGLE_TODO"),E=Object(p.a)("DELETE_TODO"),j=Object(p.a)("CHANGE_TODO"),g=Object(p.a)("CLEAR_TODOS"),_=[],x=Object(f.a)((l={},Object(m.a)(l,v,(function(e,t){var a=t.payload;return Object(b.a)(a)})),Object(m.a)(l,O,(function(e,t){var a=t.payload;return[].concat(Object(b.a)(e),[Object(d.a)({},a)])})),Object(m.a)(l,h,(function(e,t){var a=t.payload;return e.map((function(e){return e.id===a?Object(d.a)(Object(d.a)({},e),{},{completed:!e.completed}):e}))})),Object(m.a)(l,E,(function(e,t){var a=t.payload;return e.filter((function(e){return e.id!==a}))})),Object(m.a)(l,j,(function(e,t){var a=t.payload;return e.map((function(e){return e.id===a.id&&(e.text=a.text),e}))})),Object(m.a)(l,g,(function(){return _})),l),_),N=Object(p.a)("USER_CHANGE"),y=Object(p.a)("USER_LOGOUT"),S=Object(p.a)("USER_STATUS"),k=Object(f.a)((i={},Object(m.a)(i,N,(function(e,t){var a=t.payload;return Object(d.a)(Object(d.a)({},e),{},{user:a.user,id:a.id,auth:!0})})),Object(m.a)(i,y,(function(e,t){return Object(d.a)(Object(d.a)({},e),{},{user:"",id:"",auth:!1})})),Object(m.a)(i,S,(function(e,t){return Object(d.a)(Object(d.a)({},e),{},{status:!e.status})})),i),{user:"",id:"",auth:!1,status:!1}),w=Object(s.c)({list:x,user:k}),C=a(2),T=a(12),D=a.n(T),A=a(18),P=a(19),I=a(3),L=a(7),J=a(67),G=function(){return{request:Object(n.useCallback)(function(){var e=Object(A.a)(D.a.mark((function e(t){var a,n,r,c,o=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"GET",n=o.length>2&&void 0!==o[2]?o[2]:null,r=o.length>3&&void 0!==o[3]?o[3]:{},e.prev=3,n&&(n=JSON.stringify(n),r["Content-Type"]="application/json"),e.next=7,fetch(t,{method:a,body:n,headers:r});case 7:return c=e.sent,e.next=10,c.json();case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(3),e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),[])}},R="https://todo1111112.herokuapp.com",q=function(e){var t=e.value,a=e.name,n=e.onChange,c=e.className,o=e.placeholder,l=void 0===o?"":o;return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"input-field col s12"},r.a.createElement("input",{value:t,name:a,type:"text",className:c,onChange:function(e){return n(e)},placeholder:l}),r.a.createElement("label",{className:"active"},a)))},U=function(){var e=Object(n.useState)(""),t=Object(L.a)(e,2),a=t[0],c=t[1],o=Object(C.d)((function(e){return e.user})),l=o.id,i=o.auth,u=Object(C.c)(),s=Object(J.a)("common").t,m=G().request;return r.a.createElement("div",{className:"row"},r.a.createElement("form",{action:"submit",onSubmit:function(e){if(e.preventDefault(),a.trim().length<5)return alert(s("form.alert"));var t={text:a.trim(),id:Date.now().toString(),completed:!1};i&&m(function(e){return"".concat(R,"/api/todos/users/").concat(e)}(l),"POST",t),u(O(t)),c("")}},r.a.createElement("div",{className:"file-field input-field"},r.a.createElement("button",{className:"btn",type:"submit"},r.a.createElement("span",null,s("form.btn"))),r.a.createElement("div",{className:"file-path-wrapper"},r.a.createElement(q,{name:s("form.label"),value:a,onChange:function(e){var t=e.target;return c(t.value)},placeholder:s("form.placeholder"),className:"file-path validate"})))))},H=a(20),B=a(24),F=a.n(B),K=function(e){var t=e.data,a=e.className;return r.a.createElement("div",{className:a},t.map((function(e,t){return r.a.createElement("i",{className:"material-icons",onClick:function(){return e.onClick()},key:t}," ",e.text," ")})))},V=function(e){var t,a=e.todo,c=e.index,o=Object(n.useState)(null!==(t=null===a||void 0===a?void 0:a.text)&&void 0!==t?t:"error text"),l=Object(L.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)(!1),m=Object(L.a)(s,2),d=m[0],b=m[1],f=Object(C.c)(),p=Object(C.d)((function(e){return e.user})),O=G().request,v=function(){p.auth&&O(function(e,t){return"".concat(R,"/api/todos/users/").concat(e,"/change/completed/").concat(t)}(p.id,a.id),"POST",{completed:!a.completed}),f(h(a.id))},g=function(){i.trim()&&(d&&(p.auth&&O(function(e,t){return"".concat(R,"/api/todos/users/").concat(e,"/change/text/").concat(t)}(p.id,a.id),"POST",{text:i}),f(j({text:i,id:a.id}))),b(!d))},_=[{text:"create",onClick:g},{text:"delete",onClick:function(){p.auth&&O(function(e,t){return"".concat(R,"/api/todos/users/").concat(e,"/delete/").concat(t)}(p.id,a.id),"GET"),f(E(a.id))}}];return r.a.createElement(H.b,{draggableId:a.id,index:c,key:c},(function(e){return r.a.createElement("li",Object.assign({className:(null===a||void 0===a?void 0:a.completed)?"".concat(F.a["collection-item"]," ").concat(F.a.completed):F.a["collection-item"],ref:e.innerRef},e.draggableProps,e.dragHandleProps),r.a.createElement("label",{onChange:function(){return v()}},r.a.createElement("input",{type:"checkbox",defaultChecked:a.completed}),r.a.createElement("span",null,"''")),d?r.a.createElement("form",{action:"#",onSubmit:function(e){e.preventDefault(),g()}},r.a.createElement("input",{type:"text",value:i,onChange:function(e){return function(e){var t=e.target;u(t.value)}(e)},onFocus:function(e){return e.target.select()}})):r.a.createElement("span",null,i),r.a.createElement(K,{data:_,className:F.a.icons}))}))},W=function(){var e=Object(C.d)((function(e){return e.list})),t=Object(J.a)("common").t;return r.a.createElement(H.c,{droppableId:Date.now().toString()},(function(a){return r.a.createElement("ul",Object.assign({className:"collection with-header"},a.droppableProps,{ref:a.innerRef}),(null===e||void 0===e?void 0:e.length)?e.map((function(e,t){return r.a.createElement(V,{index:t,todo:e,key:(null===e||void 0===e?void 0:e.id)||t})})):r.a.createElement("h5",null,t("list.clear_list")),a.placeholder)}))},z=function(e){var t=e.data,a=Object(n.useState)(0),c=Object(L.a)(a,2),o=c[0],l=c[1],i=Object(C.d)((function(e){return e.user})).user,u=Object(C.c)(),s=Object(J.a)("common"),m=s.t,d=s.i18n;return r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper container"},r.a.createElement("a",{href:"/",className:"brand-logo"},m("nav_bar.title")),r.a.createElement("ul",{id:"nav-mobile",className:"right"},r.a.createElement("li",{onClick:function(){return l(o+1),o>=t.length-1&&l(0),void d.changeLanguage(t[o])}},r.a.createElement("a",{href:"#"},r.a.createElement("i",{className:"material-icons"},"language"))),i?r.a.createElement("li",null,r.a.createElement(P.b,{to:"/"},i)):"",r.a.createElement("li",{onClick:function(){i&&(u(y()),u(g()))}},r.a.createElement(P.b,{to:"/auth"},m(i?"nav_bar.btn_logOut":"nav_bar.btn_logIn"))))))},Y=function(){var e=Object(n.useState)(""),t=Object(L.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),l=Object(L.a)(o,2),i=l[0],u=l[1],s=Object(n.useState)(!1),m=Object(L.a)(s,2),d=m[0],b=m[1],f=Object(J.a)("common").t,p=Object(C.c)(),O=G().request,v=function(){var e=Object(A.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a.trim()&&""!==i.trim()){e.next=3;break}return alert(f("auth.alert")),e.abrupt("return");case 3:return e.next=5,O("".concat(R,"/api/auth/register_login"),"POST",{login:a,password:i});case 5:if((t=e.sent).errors){e.next=10;break}return p(N(t)),p(S()),e.abrupt("return",b(!0));case 10:alert(t.errors);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){var t=e.target;return t.name===f("auth.name_login")?c(t.value.trim()):u(t.value.trim())};return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m12"},r.a.createElement("div",{className:"card blue-grey darken-3 "},r.a.createElement("div",{className:"card-content white-text"},r.a.createElement("span",{className:"card-title"},f("auth.title")),r.a.createElement("div",{className:"container"},r.a.createElement(q,{onChange:h,value:a,name:f("auth.name_login"),className:"validate"}),r.a.createElement(q,{onChange:h,value:i,name:f("auth.name_password"),className:"validate"}))),r.a.createElement("div",{className:"card-action"},function(e){return e?r.a.createElement(I.a,{to:"/list"}):""}(d),r.a.createElement("a",{onClick:function(){return v()}},f("auth.btn"))))))},$=a(42),M=a(43),Q=a(47),X=a(46),Z=function(e){Object(Q.a)(a,e);var t=Object(X.a)(a);function a(e){var n;return Object($.a)(this,a),(n=t.call(this,e)).state={hasError:!1,error:""},n}return Object(M.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. Error: ",this.state.error):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),a}(r.a.Component),ee=["ru","en"],te=function(){var e=Object(C.d)((function(e){return e})),t=e.list,a=e.user,c=Object(C.c)(),o=G().request;return Object(n.useEffect)((function(){(function(){var e=Object(A.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.status){e.next=6;break}return e.next=3,o((r=a.id,"".concat(R,"/api/todos/users/").concat(r,"/add_all")),"POST",{data:t});case 3:n=e.sent,c(v(n)),c(S());case 6:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}})()().catch((function(e){return console.error(e)}))}),[a.status]),r.a.createElement(n.Suspense,{fallback:"loading"},r.a.createElement(P.a,{basename:"/"},r.a.createElement("main",null,r.a.createElement(Z,null,r.a.createElement(z,{data:ee}),r.a.createElement("div",{className:"container"},r.a.createElement(I.d,null,r.a.createElement(I.b,{exact:!0,path:"/"},r.a.createElement(I.a,{to:"/list"})),r.a.createElement(I.b,{path:"/auth"},r.a.createElement(Y,null)),r.a.createElement(I.b,{path:"/list"},r.a.createElement(U,null),r.a.createElement(H.a,{onDragEnd:function(e){var n=e.destination,r=e.source;if(n){var l,i,u,s=function(e){var t=e.destination,a=e.source,n=e.list,r=Array.from(n),c=r.splice(a.index,1),o=Object(L.a)(c,1)[0];return r.splice(t.index,0,o),r}({destination:n,source:r,list:t});c(v(s)),a.auth&&o((l=a.id,i=n.index,u=r.index,"".concat(R,"/api/todos/users/").concat(l,"/replace/start/").concat(i,"/end/").concat(u)))}}},r.a.createElement(W,null)))))))))},ae=a(34),ne=a(65),re=a(44),ce=a(45),oe=function(){try{var e=localStorage.getItem("state");return e?JSON.parse(e):_}catch(t){return _}}();(u=Object(s.e)(w,oe)).subscribe((function(){return function(e){try{return localStorage.setItem("state",JSON.stringify(e))}catch(t){return console.error("Error localstorage",t),_}}(u.getState())})),ae.a.init({interpolation:{escapeValue:!1},lng:"en",resources:{en:{common:re},ru:{common:ce}}}),o.a.render(r.a.createElement(C.a,{store:u},r.a.createElement(ne.a,{i18n:ae.a},r.a.createElement(te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.941212c0.chunk.js.map